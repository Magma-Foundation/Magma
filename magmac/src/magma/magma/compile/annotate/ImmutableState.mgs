import magma.api.collect.List;
import magma.java.JavaList;
export default object ImmutableState {
	private final frames : List<List<String>>;
	public def enter(this : Self) => ImmutableState(frames.pushLast(JavaList.empty()));
	public def computeDepth(this : Self) => frames.size();
	public def exit(this : Self) => ImmutableState(frames.popLastAndDiscard().orElse(frames));
	implements State;
}